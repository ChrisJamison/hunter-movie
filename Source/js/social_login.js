function statusChangeCallback(response){var fbLogin=document.getElementById('facebookLogin'),fbLogout=document.getElementById('facebookLogout'),greet=document.getElementById('userGreeting'),fbStatus=document.getElementById('status');if(response.status==='connected'){App.sendUserData();}else if(response.status==='not_authorized'){}else{}}
function loginUsingFacebook(){FB.login(function(response){FB.getLoginStatus(function(response){statusChangeCallback(response);});},{scope:'public_profile, email'});}
function logoutFacebook(){FB.logout(function(response){FB.getLoginStatus(function(response){statusChangeCallback(response);});});}
var App={sendUserData:function(){FB.api('/me?fields=token_for_business,email,name,gender',function(response){var fb_access_token=FB.getAuthResponse()['accessToken'];var data={'provider':'Facebook','status':'connected','id':response.id,'fb_access_token':fb_access_token,'token':response.token_for_business,'email':response.email,'name':response.name,'gender':response.gender};localStorage.setItem('app_social_uid',data['id']);$.ajax({method:'post',url:'/user/login',data:data,dataType:'json',success:function(data,status){console.log('Sent User data!');window.location.reload();},error:function(error){console.log('Error in sending ajax data');window.location.reload();}});});},};function signOut(){var auth2=gapi.auth2.getAuthInstance();auth2.signOut().then(function(){});}
function onSignIn(googleUser){var profile=googleUser.getBasicProfile();var id_token=googleUser.getAuthResponse().id_token;console.log("ID: "+ profile.getId());console.log('Full Name: '+ profile.getName());console.log('Given Name: '+ profile.getGivenName());console.log('Family Name: '+ profile.getFamilyName());console.log("Image URL: "+ profile.getImageUrl());console.log("Email: "+ profile.getEmail());data={'email':profile.getEmail(),'name':profile.getName(),'id':profile.getId(),'image':profile.getImageUrl(),'token':id_token,'provider':'Google',};$.ajax({method:'post',url:'/user/login',data:data,dataType:'json',success:function(data,status){console.log('Sent User data!');},});signOut();setTimeout(function(){window.location.href='http://banhtv.com';},3000);};